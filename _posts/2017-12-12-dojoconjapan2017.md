---
layout: post
title: "手作り！ふしぎマニューバー"        # Title of the post
description: "「ふしぎマニューバーでふかし体験」の個人的な感想記事"    # Description of the post, used for Facebook Opengraph & Twitter
headline: "DojoCon Japan 2017 Advent Calendar 2017 12日目"  # Will appear in bold letters on top of the post
modified: 2017-12-12   # Date
category: technocrafts
tags: [DojoCon Japan 2017,Unity,VIVE,電子工作]
ogp_image: /images/20171212-main.png
imagefeature: 20171212_00.jpg
comments: false
type: "photo"
mathjax:
---

この記事は、[DojoCon Japan 2017 アドベントカレンダー](https://adventar.org/calendars/2476)12日目のお話として、「ふしぎマニューバー」手作り体験を綴った記事です。

![全景](/images/20171212_01.jpg){: .img-responsive}

2017年夏、いつもよりちょっと早めの梅雨明けのころにスタートした「ふしぎマニューバーでふかし体験」企画。

発端は、2017年3月のKANDAIMeRISE8階のイベント[【ホラー×web技術×Kinectセンサー】さえ子のお人形](https://peatix.com/event/246941)の勉強会。話を聞いていて、DojoConでもこんなコンテンツやってみたい！と思ったこざるが、[METEORWORKS](http://meteorworks.jp/)のかみやさんに「[DojoCon Japan 2017](https://dojocon2017.coderdojo.jp/) で子ども向けに何かやりませんか？」と声をかけたのが、この企画の始まりでした。Kinectも知らないし、web技術といってもマークアップ（多めに言ってもフロント）しか知らないなか、勢いでお願いをしてしまったなぁと思いつつ、文章を書いています。

<hr>

## [「ふしぎマニューバーでふかし体験」](https://dojocon2017.coderdojo.jp/workshops/498/)

DojoCon Japan 2017のWorkshop企画の一つです。[Unity](https://unity3d.com/jp)と[VIVE](https://www.vive.com/jp/)を使って作成しました。

VIVE Trackerをつけた「ふしぎマニューバー」を使って、モンスターを暗闇の街からみつけ、倒していきます。「ふしぎマニューバー」は、モンスター発見時にはぶるっと震え、トリガーをひくとスクリーン上でインクが発射されます。

![全景](/images/20171212_02.jpg){: .img-responsive}

当日は、多くの方に体験していただけました！
ここからは、お手伝いした「ふしぎマニューバー」の電子工作を中心にお話ししていこうと思います。

<hr>

## 最初は何を作ろうから...だったんです

ほんとに白紙。何作ろうというところからのスタートでした。「子どもって何がおもしろいんやろ？」を軸に、こざるから自由な発想で伝えたイメージはこんな感じです。

* 子どもたちに新しい技術を体験してほしいよね！
* 関西発！みたいな手作りコンテンツにしたいね！

ざっくりしたイメージで申し訳ないなぁと思っていたら、このむちゃぶりな発想にちゃんとした技術案でのお返事が返ってきました。

* [VIVE Tracker](https://www.vive.com/jp/vive-tracker/) と Unity を使ったシューティングゲーム
* センサーを利用した立体視か不可視

VIVE Tracker？ Unity？ 立体視？ 不可視？ 一つ一つの用語を確認していきます。

少しずつ噛み砕けてきたころに「VIVE Trackerを銃につけたい！」という提案が追加されました。「トリガーを引いたら光るようなおもちゃの銃があれば、簡単に作れるねんけど...」とのこと。「なかなか思ったものってないから、その部分は作ってもいいかもしれないですね」と答えたのを覚えてます。

![Trackerとマニューバー](/images/20171212_03.jpg){: .img-responsive}

そのあと市販の水鉄砲に、VIVE Trackerをつけたら、なんとぴったり。これは電子工作するしか！ということで、ここから「マニューバーづくり」が始まったわけです。ArduinoでLチカしたり、センサーつかったりの簡単な電子工作しかできないこざるで大丈夫？と不安な気持ちとともに、電子工作沼に足を踏み入れました。

<small>マニューバー（maneuver）は、名詞で「作戦行動、機動作戦」のような意味。<br>この企画では、市販されている水鉄砲を利用して「ふしぎマニューバー」を作成しました。</small>

<hr>

## トリガーづくりはLチカから

まずは、水鉄砲をネジをとって分解。ここで水が前にでたり後ろにでたりを切り替えしてるんだぁと感心しつつ、肝心のトリガー部分を観察。Trackerとの接続用に、トリガーを引いたら、LEDが光る仕様をつくることが、こざるの最初の担当でした。

![分解](/images/20171212_04.jpg){: .img-responsive}

### ちっちゃいタクトスイッチとネジをトリガーに埋め込んでみる！

次に、トリガー部分を細かく分解しました。トリガーを引く（押し込む）とバネが伸縮する仕組になっていました。

![トリガー部分](/images/20171212_05.jpg){: .img-responsive}

そこで、トリガー側のシリコン部分に、ネジをつけ、ワッシャー・ナットで補強しました。そして、ネジがスイッチを押せるように、逆側のシリコンに穴を開け、スイッチをつけて調整。

![トリガー部分](/images/20171212_06.jpg){: .img-responsive}

基板付きのスイッチをつけようとしたら、持ち手とトリガー部分の隙間が2-3mmしかなく、配置不可能でした。不安は残りますが、ちっちゃいタクトスイッチを配置することに。接続部分が小さいので、ハンダ付けのあと、レジンで補強したり、試行錯誤しました。

![トリガー部分](/images/20171212_07.jpg){: .img-responsive}
![トリガー部分](/images/20171212_08.jpg){: .img-responsive}

### Lチカってこんなにうれしかったっけ？

記事で書くと短く感じますが、空き時間を使っての慣れない電子工作作業...光ったときは、ほんとに感動でした！

「よっしゃー！光った！Lチカ万歳！」

<iframe width="560" height="315" src="https://www.youtube.com/embed/h7ExmdXjtyY?rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
<small>抵抗付きLEDと単三乾電池で光らせてます。スイッチだけでは光らないので...念のため。</small>

イベントが無事終わって、タクトスイッチ部分、このサイズ、この仕様で、100人分の体験がよく実現できたなぁと思います。小さいタクトスイッチがいい仕事をしてくれました。

<hr>

## マニューバーぶるぶる大作戦

もう一つのコンテンツとして、見えないものが見える不可視（ふかし）体験を組み込むことに。真っ暗なスクリーンを光らない懐中電灯（マニューバー）で照らし、モンスターを見つけます。「みつかった」を体で体験してほしくて、みつかったときにマニューバーをぶるっと震わせることにしました。

### ぶるっ（モーター）の電源どうしたらいい？

トリガーのLチカは、確認装置のため、体験時のマニューバーには取り付けませんが、振動モーターは、体験時に電源が必要とのこと。「ふるえて」の指示は、VIVE Trackerからもらえるけど、モーターをぶるぶるするための電源が別途必要らしいです。

<iframe width="560" height="315" src="https://www.youtube.com/embed/2gfmnY84YG8?rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
<small>[ふしぎマニューバー](http://wondershooter.net/)サイト作成時に作った動画「マニューバーのひみつ」</small>

ここで手詰まりだったこざるに、かみやさんからのご指導がありました。「トランジスタスイッチ」でできるとのこと。トランジスタって、足３本の装置だよね...昔使ったことあるような、ないような...

### そもそもトランジスタとは

トランジスタは、端子が３本ある電子工作パーツです。それぞれの端子は、エミッタ、コレクタ、ベースという名前。コミッタからエミッタに電流が流れます。ベースがこの電流をコントロールします。

![トランジスタ](/images/20171212_09.jpg){: .img-responsive}

少々複雑なパーツですが、電気回路をちゃんと設計して使うと安全とのこと（よかった、ほっ）。トランジスタスイッチで、VIVE Trackerから受け取った「みつかったよ！」信号から、ぶるっとさせることになりました。

### ぶるっまでの長い道のり...

ぶるっまでは、長い道のりがありました。使う振動モーターも組み込めるサイズにする必要があって、いろいろ探しました。

![振動モーター](/images/20171212_10.jpg){: .img-responsive}

記事が長くなりそうなので、作成時の5つのステップを紹介。5つが順番にうまくいったのではなく、前後しつつ、なんとか完成しました。本やレシピをみて作るのと、実際にないものをいろいろなパーツを買ってきて作ることの違いやハードルの高さを感じました。できてよかったです。

1. 人生初・回路図作ってみた！
2. パーツ屋さんに足繁く通ってパーツを決める
3. ブレッドボードでぶるっ！
4. ユニバーサル基板で埋め込みパーツを作る
5. マニューバーに組み込んで実装完了！ 

<br>

<iframe width="560" height="315" src="https://www.youtube.com/embed/SkW047F41Qk?rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
<small>ブレッドボードでの試作段階で、ぶるっとした瞬間！感動でした！</small>

ハルロックを読んだころに始めた電子工作。もっと詳しくなったら、この辺の記事もいつか詳細に書きたいです。

<hr>

## 最高得点は2020点でした！

![振動モーター](/images/20171212_11.jpg){: .img-responsive}

電子工作部分完成後、マニューバーをかみやさんに託し、当日のスコア表示サイトを作成しました！Unityからwebサーバにjsonを渡して（ここまではかみやさんの担当）、jsonを読み込んで表示させています。「スコア表示ほしいね！」と軽い気持ちで提案したものの、最後は時間との戦いでした。

なんとか間に合ったので、当日体験された方にカラーと連番のID（例：Green#065）とQRコードが書かれたステッカーをお渡しすることができました。しばらくの間、スコア表示のサイトもご覧いただける予定なので、下記のリンクからご覧ください。

<p class="text-center">
<a href="http://wondershooter.net/" class="btn btn-default btn-large">「ふしぎマニューバー」webサイト</a>
</p>

最高得点は「2020点」。トリガーを1分間に202回（3.3667回/秒）以上引いた計算です。大人の方にも童心に戻って楽しんでいただけたかもと思うシーンもありました。なんども体験してくれる子どもさんもいらっしゃいました。おかげさまで、延べ200人近くの方に体験いただけました！楽しんで参加してくださり、ありがとうございました！

### 説明ムービーも掲載しました

この記事の途中で紹介した「マニューバーのひみつ」ともう一つ「ふかしとライトハウス」という動画を作って、webサイトに掲載しています。

<iframe width="560" height="315" src="https://www.youtube.com/embed/rshJYkN9liU?rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
<small>動画「ふかしとライトハウス」</small>

## あとがき

「ふしぎマニューバーでふかし体験」は、コンテンツ作りから、当日の会場レイアウト、装飾まで、ほとんどが手作りの企画でした。大変なことも多々あったなか、新しいことやるってこんなに楽しいんだって思い出せる企画でもありました。

![マニューバー](/images/20171212_12.jpg){: .img-responsive}

体験してくださった方々（小さい子から大人まで）みなさんが楽しんでくださったり、どういう仕組みで動いているんですか？と質問してくださったり。制作だけでなく、イベント当日も楽しく過ごせました。

今回体験してくれた子どもたちが、VIVE TrackerやLighthouseを見たことある！知ってる！とどこかの場面で思い出してくれたり、文化祭などのイベントでもっとすごいVRブースを作ってくれることを願っています。

また、電子工作・Unity・VIVEなど、たくさんの初モノに触れることができました。この経験を次回の何かの足しにしていきたいなぁと思っています。

さいごに、スポンサーとして、エンジニアとして、この企画を完成させてくれた[METEORWORKS](http://meteorworks.jp/) のかみやさん、ありがとうございました！

![マニューバー](/images/20171212_13.jpg){: .img-responsive}
